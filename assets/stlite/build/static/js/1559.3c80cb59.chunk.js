"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[1559],{91559:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var a=r(30969),n=r(91439),s=r(69016),i=r(13736),d=r(37574);const l=528;function o(e){let{element:t,width:r,endpoints:o,elementMgr:u}=e;const c=(0,a.useRef)(null),{type:p,url:m,startTime:f,subtitles:h,endTime:v,loop:y,autoplay:E,muted:T}=t,g=(0,i.O0)(m),L=(0,i.KA)(h),w=(0,a.useMemo)((()=>{if(!t.id)return!0;const e=u.getElementState(t.id,"preventAutoplay");return e||u.setElementState(t.id,"preventAutoplay",!0),null!==e&&void 0!==e&&e}),[t.id,u]);(0,a.useEffect)((()=>{c.current&&(c.current.currentTime=f)}),[f]),(0,a.useEffect)((()=>{const e=c.current,r=()=>{e&&(e.currentTime=t.startTime)};return e&&e.addEventListener("loadedmetadata",r),()=>{e&&e.removeEventListener("loadedmetadata",r)}}),[t]),(0,a.useEffect)((()=>{const e=c.current;if(!e)return;let t=!1;const r=()=>{v>0&&e.currentTime>=v&&(y?(e.currentTime=f||0,e.play()):t||(t=!0,e.pause()))};return v>0&&e.addEventListener("timeupdate",r),()=>{e&&v>0&&e.removeEventListener("timeupdate",r)}}),[v,y,f]),(0,a.useEffect)((()=>{const e=c.current;if(!e)return;const t=()=>{y&&(e.currentTime=f||0,e.play())};return e.addEventListener("ended",t),()=>{e&&e.removeEventListener("ended",t)}}),[y,f]);const b=e=>{const{startTime:r,endTime:a,loop:n,autoplay:s,muted:i}=t,d=new URL(e);if(r&&!isNaN(r)&&d.searchParams.append("start",r.toString()),a&&!isNaN(a)&&d.searchParams.append("end",a.toString()),n){d.searchParams.append("loop","1");const e=d.pathname.split("/").pop();e&&d.searchParams.append("playlist",e)}return s&&d.searchParams.append("autoplay","1"),i&&d.searchParams.append("mute","1"),d.toString()};if(p===n.nk.Type.YOUTUBE_IFRAME){const e=0!==r?.75*r:l;return(0,d.jsx)("iframe",{"data-testid":"stVideo",title:g,src:b(g),width:r,height:e,style:{colorScheme:"normal"},frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0})}return(0,d.jsx)("video",{"data-testid":"stVideo",ref:c,controls:!0,muted:T,autoPlay:E&&!w,src:o.buildMediaURL(g),className:"stVideo",style:{width:r,height:0===r?l:void 0},crossOrigin:s.td&&L.length>0?"anonymous":void 0,children:L&&L.map(((e,t)=>(0,d.jsx)("track",{kind:"captions",src:o.buildMediaURL(e.url),label:e.label,default:0===t},t)))})}}}]);
//# sourceMappingURL=1559.3c80cb59.chunk.js.map