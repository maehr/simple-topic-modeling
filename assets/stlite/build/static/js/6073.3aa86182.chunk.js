/*! For license information please see 6073.3aa86182.chunk.js.LICENSE.txt */
var stlite;!function(){"use strict";var e={22523:function(e){function t(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",o=0,a=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a===s-1||1===i);else if(a!==s-1&&2===i){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){-1===c?(n="",o=0):o=(n=n.slice(0,c)).length-1-n.lastIndexOf("/"),a=s,i=0;continue}}else if(2===n.length||1===n.length){n="",o=0,a=s,i=0;continue}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),o=s-a-1;a=s,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var i;a>=0?i=arguments[a]:(void 0===e&&(e=process.cwd()),i=e),t(i),0!==i.length&&(n=i+"/"+n,o=47===i.charCodeAt(0))}return n=r(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&o&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var o=arguments[r];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length,i=a-o,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var c=r.length-s,l=i<c?i:c,u=-1,f=0;f<=l;++f){if(f===l){if(c>l){if(47===r.charCodeAt(s+f))return r.slice(s+f+1);if(0===f)return r.slice(s+f)}else i>l&&(47===e.charCodeAt(o+f)?u=f:0===f&&(u=0));break}var p=e.charCodeAt(o+f);if(p!==r.charCodeAt(s+f))break;47===p&&(u=f)}var h="";for(f=o+u+1;f<=a;++f)f!==a&&47!==e.charCodeAt(f)||(0===h.length?h+="..":h+="/..");return h.length>0?h+r.slice(s+u):(s+=u,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,o=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!a){o=i;break}}else a=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,r){if(void 0!==r&&"string"!==typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,o=0,a=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,c=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!i){o=n+1;break}}else-1===c&&(i=!1,c=n+1),s>=0&&(l===r.charCodeAt(s)?-1===--s&&(a=n):(s=-1,a=c))}return o===a?a=c:-1===a&&(a=e.length),e.slice(o,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){o=n+1;break}}else-1===a&&(i=!1,a=n+1);return-1===a?"":e.slice(o,a)},extname:function(e){t(e);for(var r=-1,n=0,o=-1,a=!0,i=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===o&&(a=!1,o=s+1),46===c?-1===r?r=s:1!==i&&(i=1):-1!==r&&(i=-1);else if(!a){n=s+1;break}}return-1===r||-1===o||0===i||1===i&&r===o-1&&r===n+1?"":e.slice(r,o)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,o=e.charCodeAt(0),a=47===o;a?(r.root="/",n=1):n=0;for(var i=-1,s=0,c=-1,l=!0,u=e.length-1,f=0;u>=n;--u)if(47!==(o=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===o?-1===i?i=u:1!==f&&(f=1):-1!==i&&(f=-1);else if(!l){s=u+1;break}return-1===i||-1===c||0===f||1===f&&i===c-1&&i===s+1?-1!==c&&(r.base=r.name=0===s&&a?e.slice(1,c):e.slice(s,c)):(0===s&&a?(r.name=e.slice(1,i),r.base=e.slice(1,c)):(r.name=e.slice(s,i),r.base=e.slice(s,c)),r.ext=e.slice(i,c)),s>0?r.dir=e.slice(0,s-1):a&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){t=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),s=new j(n||[]);return a(i,"_invoke",{value:k(e,r,s)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}r.wrap=f;var h={};function d(){}function g(){}function m(){}var v={};u(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(O([])));b&&b!==n&&o.call(b,s)&&(v=b);var _=m.prototype=d.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(t,r){function n(a,i,s,c){var l=p(t[a],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==e(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):r.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,o){n(e,t,r,o)}))}return i=i?i.then(o,o):o()}})}function k(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=A(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return g.prototype=m,a(_,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=u(m,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},w(x.prototype),u(x.prototype,c,(function(){return this})),r.AsyncIterator=x,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var i=new x(f(e,t,n,o),a);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),u(_,l,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},r}var n;!function(e){function t(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e}function r(e){return Array.isArray(e)}function n(e,o){if(e===o)return!0;if(t(e)||t(o))return!1;var a=r(e),i=r(o);return a===i&&(a&&i?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0,o=e.length;r<o;++r)if(!n(e[r],t[r]))return!1;return!0}(e,o):function(e,t){if(e===t)return!0;for(var r in e)if(void 0!==e[r]&&!(r in t))return!1;for(var r in t)if(void 0!==t[r]&&!(r in e))return!1;for(var r in e){var o=e[r],a=t[r];if(void 0!==o||void 0!==a){if(void 0===o||void 0===a)return!1;if(!n(o,a))return!1}}return!0}(e,o))}function o(e){return t(e)?e:r(e)?function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;++r)t[r]=o(e[r]);return t}(e):function(e){var t={};for(var r in e){var n=e[r];void 0!==n&&(t[r]=o(n))}return t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=r,e.isObject=function(e){return!t(e)&&!r(e)},e.deepEqual=n,e.deepCopy=o}(n||(n={}));!function(){function e(){this._types=[],this._values=[]}e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0}}();var o,a,i=function(){function e(){var e=this;this.promise=new Promise((function(t,r){e._resolve=t,e._reject=r}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}();function s(e){for(var t=0,r=0,n=e.length;r<n;++r)r%4===0&&(t=4294967295*Math.random()>>>0),e[r]=255&t,t>>>=8}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}!function(e){e.getRandomValues=function(){var e="undefined"!==typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"===typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:s}()}(o||(o={})),function(e){e.uuid4=function(e){for(var t=new Uint8Array(16),r=new Array(256),n=0;n<16;++n)r[n]="0"+n.toString(16);for(n=16;n<256;++n)r[n]=n.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],r[t[0]]+r[t[1]]+r[t[2]]+r[t[3]]+"-"+r[t[4]]+r[t[5]]+"-"+r[t[6]]+r[t[7]]+"-"+r[t[8]]+r[t[9]]+"-"+r[t[10]]+r[t[11]]+r[t[12]]+r[t[13]]+r[t[14]]+r[t[15]]}}(o.getRandomValues)}(a||(a={}));var u=r(22523),f=r.n(u);function p(e,t){var r,n=f().normalize(t),o=[],a=l(f().dirname(n).split("/"));try{for(a.s();!(r=a.n()).done;){var i=r.value;o.push(i);var s=o.join("/");if(e.FS.analyzePath(s).exists){if(e.FS.isDir(s))throw new Error('"'.concat(s,'" already exists and is not a directory.'))}else try{e.FS.mkdir(s)}catch(c){throw console.error('Failed to create a directory "'.concat(s,'"')),c}}}catch(c){a.e(c)}finally{a.f()}}function h(e,t,r,n){p(e,t),e.FS.writeFile(t,r,n)}function d(e,t,r){p(e,r),e.FS.rename(t,r)}function g(e){e.forEach((function(e){var t;try{t=new URL(e)}catch(r){return}if("emfs:"===t.protocol||"file:"===t.protocol)throw new Error('"emfs:" and "file:" protocols are not allowed for the requirement ('.concat(e,")"))}))}function m(e){e.runPython('\nimport micropip\nmicropip.add_mock_package(\n    "pyarrow", "0.0.1",\n    modules={\n        "pyarrow": """\n__version__ = \'0.0.1\'  # TODO: Update when releasing\n\n\nclass Table:\n    @classmethod\n    def from_pandas(*args, **kwargs):\n        raise NotImplementedError("stlite is not supporting this method.")\n"""\n    }\n)\n')}var v,y,b=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},_=self,w=new i;function x(e){_.postMessage({type:"event:progress",data:{message:e}})}function k(e,r){return b(this,void 0,void 0,t().mark((function n(){var o,a,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.slice(0,e.lastIndexOf("/")+1),!e.endsWith(".mjs")){t.next=8;break}return t.next=4,import(e);case 4:i=t.sent,a=i.loadPyodide,t.next=10;break;case 8:importScripts(e),a=self.loadPyodide;case 10:return t.abrupt("return",a(Object.assign(Object.assign({},r),{indexURL:o})));case 11:case"end":return t.stop()}}),n)})))}var A=function(){return b(this,void 0,void 0,t().mark((function e(){var r,n,o,a,i,s,c,l,u,f,p,d,A,S=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.promise;case 2:return r=e.sent,n=r.entrypoint,o=r.files,a=r.archives,i=r.requirements,s=r.wheels,c=r.mountedSitePackagesSnapshotFilePath,l=r.pyodideUrl,u=void 0===l?"https://cdn.jsdelivr.net/pyodide/v0.23.3/full/pyodide.js":l,f=r.streamlitConfig,x("Loading Pyodide."),console.debug("Loading Pyodide"),e.next=16,k(u,{stdout:console.log,stderr:console.error});case 16:return v=e.sent,console.debug("Loaded Pyodide"),x("Mounting files."),e.next=21,Promise.all(Object.keys(o).map((function(e){return b(S,void 0,void 0,t().mark((function r(){var n,a,i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("url"in(n=o[e]))){t.next=8;break}return console.debug("Fetch a file from ".concat(n.url)),t.next=5,fetch(n.url).then((function(e){return e.arrayBuffer()})).then((function(e){return new Uint8Array(e)}));case 5:a=t.sent,t.next=9;break;case 8:a=n.data;case 9:i=o[e].opts,console.debug('Write a file "'.concat(e,'"')),h(v,e,a,i);case 12:case"end":return t.stop()}}),r)})))})));case 21:return x("Unpacking archives."),e.next=24,Promise.all(a.map((function(e){return b(S,void 0,void 0,t().mark((function r(){var n,o,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("url"in e)){t.next=7;break}return console.debug("Fetch an archive from ".concat(e.url)),t.next=4,fetch(e.url).then((function(e){return e.arrayBuffer()}));case 4:n=t.sent,t.next=8;break;case 7:n=e.buffer;case 8:o=e.format,a=e.options,console.debug("Unpack an archive",{format:o,options:a}),v.unpackArchive(n,o,a);case 11:case"end":return t.stop()}}),r)})))})));case 24:if(!c){e.next=40;break}return x("Restoring the snapshot."),e.next=28,v.runPythonAsync("import tarfile, shutil, site");case 28:return e.next=30,v.runPythonAsync("\n      site_packages_dirs = site.getsitepackages()\n      for site_packages in site_packages_dirs:\n          shutil.rmtree(site_packages)\n    ");case 30:return console.debug("Unarchive ".concat(c)),e.next=33,v.runPythonAsync('\n      with tarfile.open("'.concat(c,'", "r") as tar_gz_file:\n          tar_gz_file.extractall("/")\n    '));case 33:console.debug("Restored the snapshot"),x("Mocking some packages."),console.debug("Mock pyarrow"),m(v),console.debug("Mocked pyarrow"),e.next=58;break;case 40:if(!s){e.next=57;break}return x("Installing streamlit and its dependencies."),console.debug("Loading stlite-server, and streamlit"),e.next=45,v.loadPackage("micropip");case 45:return p=v.pyimport("micropip"),e.next=48,p.install.callKwargs([s.stliteServer],{keep_going:!0});case 48:return e.next=50,p.install.callKwargs([s.streamlit],{keep_going:!0});case 50:console.debug("Loaded stlite-server, and streamlit"),x("Mocking some packages."),console.debug("Mock pyarrow"),m(v),console.debug("Mocked pyarrow"),e.next=58;break;case 57:throw new Error("Neither snapshot nor wheel files are provided.");case 58:if(!(i.length>0)){e.next=68;break}return x("Installing the requirements."),console.debug("Installing the requirements:",i),g(i),e.next=64,v.loadPackage("micropip");case 64:return d=v.pyimport("micropip"),e.next=67,d.install.callKwargs(i,{keep_going:!0});case 67:console.debug("Installed the requirements:",i);case 68:return e.next=70,v.runPythonAsync("\n    import importlib\n    importlib.invalidate_caches()\n  ");case 70:return x("Loading streamlit package."),console.debug("Loading the Streamlit package"),e.next=74,v.runPythonAsync("\n      import streamlit.runtime\n      import streamlit.web\n  ");case 74:return console.debug("Loaded the Streamlit package"),x("Setting up the loggers."),console.debug("Setting the loggers"),e.next=79,v.runPythonAsync("\n      import logging\n      import streamlit.logger\n\n      streamlit.logger.get_logger = logging.getLogger\n      streamlit.logger.setup_formatter = None\n      streamlit.logger.update_formatter = lambda *a, **k: None\n      streamlit.logger.set_log_level = lambda *a, **k: None\n  ");case 79:return A=function(e){e.startsWith("CRITICAL")||e.startsWith("ERROR")?console.error(e):e.startsWith("WARNING")?console.warn(e):e.startsWith("INFO")?console.info(e):e.startsWith("DEBUG")?console.debug(e):console.log(e)},self.__logCallback__=A,e.next=83,v.runPythonAsync('\n      from js import __logCallback__\n\n\n      class JsHandler(logging.Handler):\n          def emit(self, record):\n              msg = self.format(record)\n              __logCallback__(msg)\n\n\n      main_formatter = logging.Formatter("%(levelname)s:%(name)s:%(message)s")\n\n      js_handler = JsHandler()\n      js_handler.setFormatter(main_formatter)\n\n      root_logger = logging.getLogger()\n      root_logger.handlers.clear()\n      root_logger.addHandler(js_handler)\n      root_logger.setLevel(logging.DEBUG)\n\n      streamlit_handler = logging.getLogger("streamlit")\n      streamlit_handler.setLevel(logging.DEBUG)\n  ');case 83:return console.debug("Set the loggers"),x("Mocking some Streamlit functions for the browser environment."),console.debug("Mocking some Streamlit functions"),e.next=88,v.runPythonAsync("\n    import streamlit\n\n    def is_cacheable_msg(msg):\n        return False\n\n    streamlit.runtime.runtime.is_cacheable_msg = is_cacheable_msg\n  ");case 88:return console.debug("Mocked some Streamlit functions"),x("Booting up the Streamlit server."),console.debug("Booting up the Streamlit server"),self.__streamlitFlagOptions__=Object.assign(Object.assign({},f),{"browser.gatherUsageStats":!1,"runner.fastReruns":!1}),e.next=94,v.runPythonAsync('\n    from stlite_server.bootstrap import load_config_options, prepare\n    from stlite_server.server import Server\n    from js import __streamlitFlagOptions__\n\n    flag_options = __streamlitFlagOptions__.to_py()\n    load_config_options(flag_options)\n\n    main_script_path = "'.concat(n,'"\n    command_line = None\n    args = []\n\n    prepare(main_script_path, args)\n\n    server = Server(main_script_path, command_line)\n    server.start()\n  '));case 94:console.debug("Booted up the Streamlit server"),console.debug("Setting up the HTTP server"),y=v.globals.get("server").copy(),console.debug("Set up the HTTP server"),_.postMessage({type:"event:loaded"});case 99:case"end":return e.stop()}}),e)})))}().catch((function(e){throw _.postMessage({type:"event:error",data:{error:e}}),e}));self.onmessage=function(e){return b(void 0,void 0,void 0,t().mark((function r(){var n,o,a,i,s,c,l,u,f,p,m,b,x,k,S,L,j;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("initData"!==(n=e.data).type){t.next=4;break}return w.resolve(n.data),t.abrupt("return");case 4:return t.next=6,A;case 6:o=e.ports[0],t.prev=7,t.t0=n.type,t.next="websocket:connect"===t.t0?11:"websocket:send"===t.t0?16:"http:request"===t.t0?20:"file:write"===t.t0?25:"file:rename"===t.t0?30:"file:unlink"===t.t0?35:"install"===t.t0?40:46;break;case 11:return console.debug("websocket:connect",n.data),a=n.data.path,y.start_websocket(a,(function(e,t){if(t){var r=e.getBuffer("u8");e.destroy();var n=new Uint8ClampedArray(r.data.buffer,r.data.byteOffset,r.data.byteLength);_.postMessage({type:"websocket:message",data:{payload:new Uint8Array(n)}})}else _.postMessage({type:"websocket:message",data:{payload:e}})})),o.postMessage({type:"reply"}),t.abrupt("break",46);case 16:return console.debug("websocket:send",n.data),i=n.data.payload,y.receive_websocket_from_js(i),t.abrupt("break",46);case 20:return console.debug("http:request",n.data),s=n.data.request,c=function(e,t,r){var n=t.toJs(),a=r.toJs();console.debug({statusCode:e,headers:n,body:a});var i={type:"http:response",data:{response:{statusCode:e,headers:n,body:a}}};o.postMessage(i)},y.receive_http_from_js(s.method,s.path,s.headers,s.body,c),t.abrupt("break",46);case 25:return l=n.data,u=l.path,f=l.data,p=l.opts,console.debug('Write a file "'.concat(u,'"')),h(v,u,f,p),o.postMessage({type:"reply"}),t.abrupt("break",46);case 30:return m=n.data,b=m.oldPath,x=m.newPath,console.debug('Rename "'.concat(b,'" to ').concat(x)),d(v,b,x),o.postMessage({type:"reply"}),t.abrupt("break",46);case 35:return k=n.data.path,console.debug('Remove "'.concat(k)),v.FS.unlink(k),o.postMessage({type:"reply"}),t.abrupt("break",46);case 40:return S=n.data.requirements,L=v.pyimport("micropip"),console.debug("Install the requirements:",S),g(S),t.next=46,L.install.callKwargs(S,{keep_going:!0}).then((function(){if(S.includes("matplotlib"))return v.runPythonAsync("\n                from stlite_server.bootstrap import _fix_matplotlib_crash\n                _fix_matplotlib_crash()\n              ")})).then((function(){console.debug("Successfully installed"),o.postMessage({type:"reply"})}));case 46:t.next=57;break;case 48:if(t.prev=48,t.t1=t.catch(7),console.error(t.t1),t.t1 instanceof Error){t.next=53;break}throw t.t1;case 53:(j=new Error(t.t1.message)).name=t.t1.name,j.stack=t.t1.stack,o.postMessage({type:"reply",error:j});case 57:case"end":return t.stop()}}),r,null,[[7,48]])})))},_.postMessage({type:"event:start"})}(),stlite={}}();
//# sourceMappingURL=6073.3aa86182.chunk.js.map