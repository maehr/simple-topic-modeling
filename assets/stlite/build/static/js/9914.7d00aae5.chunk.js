"use strict";(self.webpackChunkstlite=self.webpackChunkstlite||[]).push([[9914],{9914:(e,t,s)=>{s.r(t),s.d(t,{FileHandle:()=>d});var r=s(25422),a=s(25068);const{WritableStream:o,TransformStream:n,DOMException:i,Blob:c}=a.Z,{GONE:l}=r.errors,h=/constructor/i.test(window.HTMLElement);class d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unkown";this.name=e,this.kind="file"}async getFile(){throw new i(...l)}async isSameEntry(e){return this===e}async createWritable(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=await(null===(e=navigator.serviceWorker)||void 0===e?void 0:e.getRegistration()),r=document.createElement("a"),a=new n,i=a.writable;if(r.download=this.name,h||!s){let e=[];a.readable.pipeTo(new o({write(t){e.push(new c([t]))},close(){const t=new c(e,{type:"application/octet-stream; charset=utf-8"});e=[],r.href=URL.createObjectURL(t),r.click(),setTimeout((()=>URL.revokeObjectURL(r.href)),1e4)}}))}else{const{writable:e,readablePort:r}=new y(o),i=encodeURIComponent(this.name).replace(/['()]/g,escape).replace(/\*/g,"%2A"),c={"content-disposition":"attachment; filename*=UTF-8''"+i,"content-type":"application/octet-stream; charset=utf-8",...t.size?{"content-length":t.size}:{}},l=setTimeout((()=>s.active.postMessage(0)),1e4);a.readable.pipeThrough(new n({transform(e,t){if(e instanceof Uint8Array)return t.enqueue(e);const s=new Response(e).body.getReader(),r=e=>s.read().then((e=>e.done?0:r(t.enqueue(e.value))));return r()}})).pipeTo(e).finally((()=>{clearInterval(l)})),s.active.postMessage({url:s.scope+i,headers:c,readablePort:r},[r]);const h=document.createElement("iframe");h.hidden=!0,h.src=s.scope+i,document.body.appendChild(h)}return i.getWriter()}}class p{constructor(e){e.onmessage=e=>this._onMessage(e.data),this._port=e,this._resetReady()}start(e){return this._controller=e,this._readyPromise}write(e){const t={type:0,chunk:e};return this._port.postMessage(t,[e.buffer]),this._resetReady(),this._readyPromise}close(){this._port.postMessage({type:2}),this._port.close()}abort(e){this._port.postMessage({type:1,reason:e}),this._port.close()}_onMessage(e){0===e.type&&this._resolveReady(),1===e.type&&this._onError(e.reason)}_onError(e){this._controller.error(e),this._rejectReady(e),this._port.close()}_resetReady(){this._readyPromise=new Promise(((e,t)=>{this._readyResolve=e,this._readyReject=t})),this._readyPending=!0}_resolveReady(){this._readyResolve(),this._readyPending=!1}_rejectReady(e){this._readyPending||this._resetReady(),this._readyPromise.catch((()=>{})),this._readyReject(e),this._readyPending=!1}}class y{constructor(e){const t=new MessageChannel;this.readablePort=t.port1,this.writable=new e(new p(t.port2))}}}}]);
//# sourceMappingURL=9914.7d00aae5.chunk.js.map